{"ast":null,"code":"import _defineProperty from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{Map,GoogleApiWrapper,InfoWindow,Marker,GoogleMap}from'google-maps-react';import{connect}from'react-redux';import{Link}from'react-router-dom';import store from'../store';import Container from'react-bootstrap/Container';import{favorite,updateFavoriteForm}from\"../actions/favorites\";import InfoWindowEx from'./InfoWindowEx';//const {REACT_GMAPS_KEY} = process.env;\nvar mapStyles={margin:'auto',width:'70%',padding:'20px'};export var MapContainer=/*#__PURE__*/function(_Component){_inherits(MapContainer,_Component);function MapContainer(props){var _this;_classCallCheck(this,MapContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(MapContainer).call(this,props));//this.onMapClicked = this.onMapClicked.bind(this);\n//this.handleSubmit = this.handleSubmit.bind(this);\n_this.handleInputChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;var updatedFavoriteInfo=_objectSpread({},_this.props.postData,_defineProperty({},name,value));//console.log(event.target.name)\n//console.log(event.target.value)\nconsole.log(updatedFavoriteInfo);//debugger\n_this.props.updateFavoriteForm(updatedFavoriteInfo);};_this.handleSubmit=function(event){event.preventDefault();//debugger\n//debugger\nconsole.log('A');_this.props.favorite(_this.props.postData);console.log('B');//this.setState({\n//  showingInfoWindow: false,\n//  activeMarker: null\n//})\nalert(\"tweet saved to favorites\");};_this.onMarkerClick=function(marker){_this.setState({selectedTweet:_this.props.myTweets.tweets[marker.id].text,selectedURL:_this.props.myTweets.tweets[marker.id].url,selectedTweetID:_this.props.myTweets.tweets[marker.id].id,activeMarker:marker,showingInfoWindow:true,redirect:false});console.log(_this.state.selectedTweet);};_this.onMapClicked=function(props){//debugger\nif(_this.state.showingInfoWindow){console.log(\"this works\");_this.setState({showingInfoWindow:false,activeMarker:null});console.log(\"why doesnt that work\");console.log(_this.state.showingInfoWindow);console.log(_this.state.activeMarker);}};_this.displayMarkers=function(){return _this.props.myTweets.tweets.map(function(art,index){return React.createElement(Marker,{key:index,id:index,position:{lat:art.lon*1,lng:art.lat*1}//onClick={() => console.log(\"you clicked\")}\n,onClick:_this.onMarkerClick});});};_this.state={selectedTweet:[],selectedURL:[],selectedTweetID:[],activeMarker:{},showingInfoWindow:false};return _this;}_createClass(MapContainer,[{key:\"render\",value:function render(){//debugger\n//console.log(this.props.currentUser)\nconsole.log(\"rerendered\");console.log(this.state.activeMarker.position);console.log(this.props);return React.createElement(React.Fragment,null,React.createElement(Container,null,React.createElement(\"h1\",null,\"tweets\"),React.createElement(\"h6\",null,\"click on a marker to view tweet and add to favorites\")),React.createElement(Map,{google:this.props.google,zoom:7,style:mapStyles,initialCenter:{lat:40.7831,lng:-73.9712}},this.displayMarkers(),this.state.showingInfoWindow?React.createElement(InfoWindowEx,{position:this.state.activeMarker.position,pixelOffset:new this.props.google.maps.Size(0,-30),visible:true},React.createElement(\"div\",null,React.createElement(\"p\",null,this.state.selectedTweet),React.createElement(\"a\",{href:this.state.selectedURL,target:\"_blank\"},this.state.selectedURL),React.createElement(\"br\",null),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"input\",{type:\"hidden\",name:\"user_id\",value:this.props.postData.user_id=this.props.currentUser.id}),React.createElement(\"input\",{type:\"hidden\",name:\"tweet_id\",value:this.props.postData.tweet_id=this.state.selectedTweetID}),React.createElement(\"textarea\",{name:\"comment\",value:this.props.postData.comment,onChange:this.handleInputChange,placeholder:\"Add a note\",cols:\"20\",rows:\"5\"}),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"submit\",value:\"Add to my favorites\"})))):null));}}]);return MapContainer;}(Component);var mapStateToProps=function mapStateToProps(state){return{postData:state.favoritesForm};};var WrappedContainer=GoogleApiWrapper({apiKey:process.env.REACT_GMAPS_PRIVATE_KEY})(MapContainer);export default connect(mapStateToProps,{updateFavoriteForm:updateFavoriteForm,favorite:favorite})(WrappedContainer);","map":{"version":3,"sources":["/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/src/components/Map.js"],"names":["React","Component","Map","GoogleApiWrapper","InfoWindow","Marker","GoogleMap","connect","Link","store","Container","favorite","updateFavoriteForm","InfoWindowEx","mapStyles","margin","width","padding","MapContainer","props","handleInputChange","event","target","name","value","updatedFavoriteInfo","postData","console","log","handleSubmit","preventDefault","alert","onMarkerClick","marker","setState","selectedTweet","myTweets","tweets","id","text","selectedURL","url","selectedTweetID","activeMarker","showingInfoWindow","redirect","state","onMapClicked","displayMarkers","map","art","index","lat","lon","lng","position","google","maps","Size","user_id","currentUser","tweet_id","comment","mapStateToProps","favoritesForm","WrappedContainer","apiKey","process","env","REACT_GMAPS_PRIVATE_KEY"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Map, GoogleApiWrapper, InfoWindow, Marker, GoogleMap } from 'google-maps-react';\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport store from '../store'\nimport Container from 'react-bootstrap/Container'\nimport { favorite, updateFavoriteForm } from \"../actions/favorites\"\nimport InfoWindowEx from './InfoWindowEx'\n//const {REACT_GMAPS_KEY} = process.env;\n\nconst mapStyles = {\n  margin: 'auto',\n  width: '70%',\n  padding: '20px'\n};\n\nexport class MapContainer extends Component {\n\n  constructor(props) {\n    super(props);\n    //this.onMapClicked = this.onMapClicked.bind(this);\n    //this.handleSubmit = this.handleSubmit.bind(this);\n\n    this.state = {\n      selectedTweet: [],\n      selectedURL: [],\n      selectedTweetID: [],\n      activeMarker: {},\n      showingInfoWindow: false\n    };\n  }\n\n  handleInputChange = (event) => {\n  const { name, value } = event.target\n  const updatedFavoriteInfo = {\n    ...this.props.postData,\n    [name]: value\n  }\n  //console.log(event.target.name)\n  //console.log(event.target.value)\n  console.log(updatedFavoriteInfo)\n  //debugger\n  this.props.updateFavoriteForm(updatedFavoriteInfo)\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    //debugger\n    //debugger\n    console.log('A')\n    this.props.favorite(this.props.postData)\n    console.log('B')\n    //this.setState({\n    //  showingInfoWindow: false,\n    //  activeMarker: null\n    //})\n    alert(\"tweet saved to favorites\")\n  }\n\n  onMarkerClick = (marker) => {\n      this.setState({\n          selectedTweet: this.props.myTweets.tweets[marker.id].text,\n          selectedURL: this.props.myTweets.tweets[marker.id].url,\n          selectedTweetID: this.props.myTweets.tweets[marker.id].id,\n          activeMarker: marker,\n          showingInfoWindow: true,\n          redirect: false\n      })\n      console.log(this.state.selectedTweet)\n  }\n\n  onMapClicked = (props) => {\n    //debugger\n  if (this.state.showingInfoWindow) {\n    console.log(\"this works\")\n    this.setState({\n      showingInfoWindow: false,\n      activeMarker: null\n    })\n    console.log(\"why doesnt that work\")\n    console.log(this.state.showingInfoWindow)\n    console.log(this.state.activeMarker)\n  }\n};\n\n    displayMarkers = () => {\n      return this.props.myTweets.tweets.map((art, index) => {\n        return <Marker key={index} id={index} position={{\n         lat: art.lon*1,\n         lng: art.lat*1\n       }}\n       //onClick={() => console.log(\"you clicked\")}\n       onClick={this.onMarkerClick}\n       />\n      })\n    }\n\n  render() {\n    //debugger\n    //console.log(this.props.currentUser)\n    console.log(\"rerendered\")\n    console.log(this.state.activeMarker.position)\n    console.log(this.props)\n    return (\n      <>\n      <Container>\n      <h1>tweets</h1>\n      <h6>click on a marker to view tweet and add to favorites</h6>\n      </Container>\n      <Map\n        google={this.props.google}\n        zoom={7}\n        style={mapStyles}\n        initialCenter={{\n         lat: 40.7831,\n         lng: -73.9712\n       }}\n       >\n       {this.displayMarkers()}\n       { this.state.showingInfoWindow ?\n         <InfoWindowEx\n        position={this.state.activeMarker.position}  pixelOffset={new this.props.google.maps.Size(0, -30)}\n        visible={true}>\n          <div>\n            <p>{this.state.selectedTweet}</p>\n            <a href={this.state.selectedURL} target=\"_blank\">{this.state.selectedURL}</a>\n            <br />\n            <form onSubmit = {this.handleSubmit}>\n              <input type=\"hidden\" name=\"user_id\" value={this.props.postData.user_id = this.props.currentUser.id} />\n              <input type=\"hidden\" name=\"tweet_id\" value={this.props.postData.tweet_id = this.state.selectedTweetID} />\n              <textarea name=\"comment\" value={this.props.postData.comment} onChange={this.handleInputChange} placeholder=\"Add a note\" cols=\"20\" rows=\"5\"></textarea>\n              <br/><input type=\"submit\" value=\"Add to my favorites\" />\n            </form>\n          </div>\n        </InfoWindowEx>\n      : null\n      }\n      </Map>\n      </>\n    );\n  }\n}\n  const mapStateToProps = state => {\n    return {\n      postData: state.favoritesForm\n    }\n  }\n\nconst WrappedContainer = GoogleApiWrapper({\n    apiKey: process.env.REACT_GMAPS_PRIVATE_KEY\n  })(MapContainer);\n\nexport default connect (mapStateToProps,{updateFavoriteForm, favorite})(WrappedContainer)\n"]},"metadata":{},"sourceType":"module"}