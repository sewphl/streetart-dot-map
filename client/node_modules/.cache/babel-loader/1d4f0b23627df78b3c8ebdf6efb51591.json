{"ast":null,"code":"import{resetLoginForm}from\"./loginForm.js\";import{resetSignupForm}from\"./signup.js\";// synchronous action creators\nexport var setCurrentUser=function setCurrentUser(user){return{type:\"SET_CURRENT_USER\",user:user};};export var clearCurrentUser=function clearCurrentUser(){return{type:\"CLEAR_CURRENT_USER\"};};// asynchronous action creators\nexport var login=function login(credentials,history){return function(dispatch){return fetch(\"/api/v1/login\",{//http://localhost:3000\ncredentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(credentials)}).then(function(r){return r.json();}).then(function(response){//debugger\nif(response.error){console.log(response);alert(response.error);}else{dispatch(setCurrentUser(response));history.push('/');}}).catch(console.log);};};export var getCurrentUser=function getCurrentUser(){return function(dispatch){return fetch(\"/api/v1/get_current_user\",{//http://localhost:3000\ncredentials:\"include\",method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(r){return r.json();}).then(function(response){if(response.error){alert(response.error);}else{dispatch(setCurrentUser(response));}}).catch(console.log);};};export var logout=function logout(event){return function(dispatch){dispatch(clearCurrentUser());return fetch(\"/api/v1/logout\",{//http://localhost:3000\ncredentials:\"include\",method:\"DELETE\"});};};export var signup=function signup(credentials,history){return function(dispatch){var userInfo={user:credentials};return fetch(\"/api/v1/signup\",{//http://localhost:3000\ncredentials:\"include\",method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userInfo)}).then(function(r){return r.json();}).then(function(response){if(response.error){alert(response.error);}else{dispatch(setCurrentUser(response));dispatch(resetSignupForm());history.push('/');}}).catch(console.log);};};","map":{"version":3,"sources":["/Users/sharonwilliams/Desktop/streetart-dot-map/streetart-dot-map/client/src/actions/currentUser.js"],"names":["resetLoginForm","resetSignupForm","setCurrentUser","user","type","clearCurrentUser","login","credentials","history","dispatch","fetch","method","headers","body","JSON","stringify","then","r","json","response","error","console","log","alert","push","catch","getCurrentUser","logout","event","signup","userInfo"],"mappings":"AAAA,OAASA,cAAT,KAA+B,gBAA/B,CACA,OAASC,eAAT,KAAgC,aAAhC,CAEA;AACA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,IAAI,CAAI,CACpC,MAAO,CACLC,IAAI,CAAE,kBADD,CAELD,IAAI,CAAJA,IAFK,CAAP,CAID,CALM,CAOP,MAAO,IAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CACpC,MAAO,CACLD,IAAI,CAAE,oBADD,CAAP,CAGD,CAJM,CAMP;AACA,MAAO,IAAME,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,WAAD,CAAcC,OAAd,CAA0B,CAC7C,MAAO,UAAAC,QAAQ,CAAI,CACnB,MAAOC,CAAAA,KAAK,iBAAoB,CAAG;AAC/BH,WAAW,CAAE,SADe,CAE5BI,MAAM,CAAE,MAFoB,CAG5BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAHmB,CAM5BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,WAAf,CANsB,CAApB,CAAL,CAQFS,IARE,CAQG,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,EAAJ,EARJ,EASFF,IATE,CASG,SAAAG,QAAQ,CAAI,CAChB;AACA,GAAIA,QAAQ,CAACC,KAAb,CAAoB,CAClBC,OAAO,CAACC,GAAR,CAAYH,QAAZ,EACAI,KAAK,CAACJ,QAAQ,CAACC,KAAV,CAAL,CACD,CAHD,IAGO,CACLX,QAAQ,CAACP,cAAc,CAACiB,QAAD,CAAf,CAAR,CACAX,OAAO,CAACgB,IAAR,CAAa,GAAb,EACD,CACF,CAlBE,EAmBFC,KAnBE,CAmBIJ,OAAO,CAACC,GAnBZ,CAAP,CAoBC,CArBD,CAsBD,CAvBM,CAyBP,MAAO,IAAMI,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAClC,MAAO,UAAAjB,QAAQ,CAAI,CACjB,MAAOC,CAAAA,KAAK,4BAA+B,CAAE;AAC3CH,WAAW,CAAE,SAD4B,CAEzCI,MAAM,CAAE,KAFiC,CAGzCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAHgC,CAA/B,CAAL,CAOJI,IAPI,CAOC,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,EAAJ,EAPF,EAQJF,IARI,CAQC,SAAAG,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACC,KAAb,CAAoB,CAClBG,KAAK,CAACJ,QAAQ,CAACC,KAAV,CAAL,CACD,CAFD,IAEO,CACLX,QAAQ,CAACP,cAAc,CAACiB,QAAD,CAAf,CAAR,CACD,CACF,CAdI,EAeJM,KAfI,CAeEJ,OAAO,CAACC,GAfV,CAAP,CAgBD,CAjBD,CAkBD,CAnBM,CAqBP,MAAO,IAAMK,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,CAAI,CAC7B,MAAO,UAAAnB,QAAQ,CAAI,CACjBA,QAAQ,CAACJ,gBAAgB,EAAjB,CAAR,CACA,MAAOK,CAAAA,KAAK,kBAAmB,CAAG;AAChCH,WAAW,CAAE,SADgB,CAE7BI,MAAM,CAAE,QAFqB,CAAnB,CAAZ,CAID,CAND,CAOD,CARM,CAUP,MAAO,IAAMkB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACtB,WAAD,CAAcC,OAAd,CAA0B,CAC9C,MAAO,UAAAC,QAAQ,CAAI,CACjB,GAAMqB,CAAAA,QAAQ,CAAG,CACf3B,IAAI,CAAEI,WADS,CAAjB,CAGA,MAAOG,CAAAA,KAAK,kBAAmB,CAAE;AAC/BH,WAAW,CAAE,SADgB,CAE7BI,MAAM,CAAE,MAFqB,CAG7BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAHoB,CAM7BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAee,QAAf,CANuB,CAAnB,CAAL,CAQJd,IARI,CAQC,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,EAAJ,EARF,EASJF,IATI,CASC,SAAAG,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACC,KAAb,CAAoB,CAClBG,KAAK,CAACJ,QAAQ,CAACC,KAAV,CAAL,CACD,CAFD,IAEO,CACLX,QAAQ,CAACP,cAAc,CAACiB,QAAD,CAAf,CAAR,CACAV,QAAQ,CAACR,eAAe,EAAhB,CAAR,CACAO,OAAO,CAACgB,IAAR,CAAa,GAAb,EACD,CACF,CAjBI,EAkBJC,KAlBI,CAkBEJ,OAAO,CAACC,GAlBV,CAAP,CAmBD,CAvBD,CAwBD,CAzBM","sourcesContent":["import { resetLoginForm } from \"./loginForm.js\"\nimport { resetSignupForm } from \"./signup.js\"\n\n// synchronous action creators\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  }\n}\n\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  }\n}\n\n// asynchronous action creators\nexport const login = (credentials, history) => {\n  return dispatch => {\n  return fetch((`/api/v1/login`), {  //http://localhost:3000\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    })\n      .then(r => r.json())\n      .then(response => {\n        //debugger\n        if (response.error) {\n          console.log(response)\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response))\n          history.push('/')\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const getCurrentUser = () => {\n  return dispatch => {\n    return fetch((`/api/v1/get_current_user`), { //http://localhost:3000\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response))\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const logout = event => {\n  return dispatch => {\n    dispatch(clearCurrentUser())\n    return fetch(`/api/v1/logout`, {  //http://localhost:3000\n      credentials: \"include\",\n      method: \"DELETE\"\n    })\n  }\n}\n\nexport const signup = (credentials, history) => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    }\n    return fetch(`/api/v1/signup`, { //http://localhost:3000\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    })\n      .then(r => r.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(setCurrentUser(response))\n          dispatch(resetSignupForm())\n          history.push('/')\n        }\n      })\n      .catch(console.log)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}